<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // 1.数组的扁平化（数组的flat方法的实现）
    let arr = [1, 2, 3, [4, 5, 6], [[7, 8], 9], 10]


    function flat(arr) {
      let result = []
      for (let i = 0; i < arr.length; i++) {
        if (Array.isArray(arr[i])) {
          // 如果是数组，继续扁平化
          _flat(result, arr[i])
        } else {
          result.push(arr[i])
        }
      }
      return result
    }
    function _flat(result, arr) {
      for (let item of arr) {
        if (Array.isArray(item)) {
          _flat(result, item)
        } else {
          result.push(item)
        }

      }
    }
    console.log(flat(arr))

    console.log(arr.flat(Infinity))

    // 2. 求数组的第k个大的元素

    // 3.生成一个乱序数组
    // function changePosition(arr, i ,j ) {
    //   [arr[i],arr[j]] = [arr[j],arr[i]]
    // }

    let randomArr = [1, 2, 3, 4, 5, 6, 7, 8, 9]
    function shuffle(arr){
      for(let i = 0; i < arr.length; i++){
        let idx = Math.floor(Math.random() * arr.length)
        while (idx == i || arr[idx] == arr[i]) {
          idx = Math.floor(Math.random() * arr.length)
        }
        // 交换位置
        // [arr[i], arr[idx]] = [arr[idx], arr[i]]  // 这种方法不可以交换
        // changePosition(arr, i ,idx)
        let temp = arr[i]
        arr[i] = arr[idx]
        arr[idx] = temp
      }
      console.log(arr)
      return arr
    }
    // function shuffle(arr) {
    //   for (let i = arr.length - 1; i >= 0; i--) {
    //     let rIndex = Math.floor(Math.random() * (i + 1));
    //     // 打印交换值
    //     // console.log(i, rIndex);
    //     let temp = arr[rIndex];
    //     arr[rIndex] = arr[i];
    //     arr[i] = temp;
    //   }
    //   console.log(arr)
    //   return arr;
    // }
    // shuffle(randomArr)

    // 固定一个元素
    function randArr(arr) {
      for(let i = 0 ; i < arr.length; i++){
        if(i == 1){
          continue
        }
        let idx = Math.floor(Math.random() * arr.length)
        while (idx == 1) {
          idx = Math.floor(Math.random() * arr.length)
        }
        // 交换位置
        let temp = arr[i]
        arr[i] = arr[idx]
        arr[idx] = temp
      }
      console.log(arr)
    }
    randArr(randomArr)
  </script>
</body>

</html>